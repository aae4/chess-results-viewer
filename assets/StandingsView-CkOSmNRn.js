import{u as K,A as M,a as _,d as g,l,b as r,r as i,w as a,h as C,F as k,i as w,C as O,H as Q,f as c,e as n,D as x,g as f,t as o}from"./index-C7cLTlNq.js";import{g as F}from"./formatters-C8Ln7w-r.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={key:0,class:"text-center pa-10"},Y=["onClick"],Z={class:"text-center rank-col"},tt={key:1,class:"text-h6 font-weight-medium text-medium-emphasis"},et={class:"d-flex align-center py-2"},nt={class:"text-white font-weight-bold"},st={class:"font-weight-bold text-subtitle-1"},at={class:"text-caption text-medium-emphasis"},ot={class:"text-center"},rt={class:"text-center text-body-1 text-medium-emphasis"},it={class:"text-center points-col font-weight-bold text-h6"},lt={key:2,class:"mobile-standings"},ct={class:"text-white font-weight-bold text-h6"},dt={class:"flex-grow-1 d-flex align-center"},_t={class:"player-name font-weight-bold"},ut={class:"player-rating text-caption text-medium-emphasis"},pt={class:"player-score text-h4 font-weight-bold"},gt={key:0,class:"text-h6 font-weight-bold mt-8 mb-4"},ft={class:"rank-indicator text-h6 text-medium-emphasis"},mt={class:"points-indicator text-h6 font-weight-bold"},ht={__name:"StandingsView",setup(vt){const d=K(),D=O(),B=Q(),R=M(),m=e=>{D.push({name:"Player",params:{tournamentId:B.params.tournamentId,playerId:e}})},z=[{title:"Место",key:"final_rank",align:"center",sortable:!1,width:"100px"},{title:"Игрок",key:"name",sortable:!1,align:"start"},{title:"+/- Рейтинга",key:"rating_change",align:"center",sortable:!1,width:"150px"},{title:"Перфоманс",key:"performance_rating",align:"center",sortable:!1,width:"150px"},{title:"Очки",key:"score",align:"center",sortable:!1,width:"120px"}],I=e=>{const s=["#0052CC","#DE350B","#36B37E","#FFAB00","#6554C0","#00B8D9"],h=e.split("").reduce((u,p)=>u+p.charCodeAt(0),0)%s.length;return s[h]},N=e=>{const s=parseInt(e);return s===1?"rank-gold":s===2?"rank-silver":s===3?"rank-bronze":""},V=e=>{const s=parseInt(e);return s===1?"amber":s===2?"blue-grey-lighten-2":s===3?"brown-lighten-2":"grey"},A=e=>{if(e==null)return"–";const s=parseFloat(e);return s>0?`+${s.toFixed(1)}`:s.toFixed(1)},P=e=>e==null?"default":parseFloat(e)>0?"success":"error",S=e=>e==null?"mdi-minus":parseFloat(e)>0?"mdi-arrow-top-right":"mdi-arrow-bottom-right",y=e=>e==1?"rank-1":e==2?"rank-2":e==3?"rank-3":"",$=e=>e==1?"#FFD700":e==2?"#C0C0C0":e==3?"#CD7F32":"grey";return(e,s)=>{const h=i("v-progress-circular"),u=i("v-icon"),p=i("v-avatar"),E=i("v-chip"),L=i("v-data-table-server"),v=i("v-card"),T=i("v-spacer"),H=i("v-card-text"),U=i("v-list-item-title"),j=i("v-list-item-subtitle"),q=i("v-list-item"),G=i("v-divider"),J=i("v-list");return c(),_("div",null,[l(d).isLoadingDetails&&!l(d).standings.length?(c(),_("div",X,[r(h,{indeterminate:"",color:"primary",size:"64"})])):l(R).mdAndUp.value?(c(),g(v,{key:1},{default:a(()=>[r(L,{headers:z,items:l(d).standings,"items-length":l(d).standings.length,"item-value":"player_id",class:"leaderboard-table",loading:l(d).isLoadingDetails,"loading-text":"Загрузка итоговой таблицы..."},{item:a(({item:t})=>[n("tr",{class:"table-row",onClick:b=>m(t.player_id)},[n("td",Z,[n("div",{class:x(["rank-indicator",N(t.final_rank)])},[t.final_rank<=3?(c(),g(u,{key:0,color:V(t.final_rank),size:"28"},{default:a(()=>[...s[0]||(s[0]=[f("mdi-trophy-variant",-1)])]),_:1},8,["color"])):(c(),_("span",tt,o(t.final_rank),1))],2)]),n("td",null,[n("div",et,[r(p,{color:I(t.name),size:"40",class:"mr-4"},{default:a(()=>[n("span",nt,o(l(F)(t.name)),1)]),_:2},1032,["color"]),n("div",null,[n("div",st,o(t.name),1),n("div",at,"Рейтинг: "+o(t.rating_at_tournament),1)])])]),n("td",ot,[r(E,{color:P(t.rating_change),variant:"tonal",label:"",size:"small"},{default:a(()=>[r(u,{start:"",icon:S(t.rating_change)},null,8,["icon"]),f(" "+o(A(t.rating_change)),1)]),_:2},1032,["color"])]),n("td",rt,o(t.performance_rating),1),n("td",it,o(t.score),1)],8,Y)]),bottom:a(()=>[...s[1]||(s[1]=[])]),_:1},8,["items","items-length","loading"])]),_:1})):(c(),_("div",lt,[(c(!0),_(k,null,w(l(d).standings.slice(0,3),t=>(c(),g(v,{key:t.player_id,class:x(["podium-card",y(t.final_rank)]),onClick:b=>m(t.player_id)},{default:a(()=>[n("div",{class:x(["rank-badge",y(t.final_rank)])},o(t.final_rank),3),r(H,{class:"d-flex align-center"},{default:a(()=>[r(p,{color:$(t.final_rank),size:"56",class:"mr-4 elevation-2"},{default:a(()=>[n("span",ct,o(l(F)(t.name)),1)]),_:2},1032,["color"]),n("div",dt,[n("div",null,[n("div",_t,o(t.name),1),n("div",ut,"Рейтинг: "+o(t.rating_at_tournament),1)]),r(T),n("div",pt,o(t.score),1)])]),_:2},1024)]),_:2},1032,["class","onClick"]))),128)),l(d).standings.length>3?(c(),_("h3",gt,"Все участники")):C("",!0),l(d).standings.length>3?(c(),g(v,{key:1},{default:a(()=>[r(J,{lines:"two",class:"py-0"},{default:a(()=>[(c(!0),_(k,null,w(l(d).standings.slice(3),t=>(c(),_(k,{key:t.player_id},[r(q,{onClick:b=>m(t.player_id)},{prepend:a(()=>[n("div",ft,o(t.final_rank),1)]),append:a(()=>[n("div",mt,o(t.score),1)]),default:a(()=>[r(U,{class:"font-weight-bold"},{default:a(()=>[f(o(t.name),1)]),_:2},1024),r(j,null,{default:a(()=>[f("Рейтинг: "+o(t.rating_at_tournament),1)]),_:2},1024)]),_:2},1032,["onClick"]),r(G)],64))),128))]),_:1})]),_:1})):C("",!0)]))])}}},bt=W(ht,[["__scopeId","data-v-8ff2d654"]]);export{bt as default};
