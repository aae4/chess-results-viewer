import{_ as O,c as p,w as Q,a as f,d as h,u as g,b as t,g as s,f as a,e as l,n as U,i as d,t as n,j as i,q as W,F as G,k as N,h as X}from"./index-CQPj8-Ml.js";import{u as Y}from"./tournamentStore-BbypOPIx.js";import{g as Z,d as tt,b as V}from"./formatters-D4D2rNmP.js";import{a as et}from"./statisticsCalculator-C-L2fKx2.js";import"./chess-DX7QKCjj.js";const st={key:0,class:"text-center pa-10"},lt={key:1,class:"player-dashboard"},nt={class:"text-h4 font-weight-light"},ot={class:"text-h4 font-weight-bold"},at={class:"text-subtitle-1 text-grey-darken-1"},rt={class:"text-center mx-4"},it={class:"text-h3 font-weight-bold"},ct={class:"text-center mx-4"},dt={class:"text-h3 font-weight-bold"},ut={class:"text-h6"},_t={class:"text-h6"},vt={class:"d-flex align-center mb-3"},mt={style:{width:"100px"}},pt={class:"d-flex align-center"},ft={style:{width:"100px"}},gt={class:"text-caption text-grey"},xt={class:"text-center"},yt={class:"text-center font-weight-bold"},ht={class:"mr-4 text-center",style:{width:"40px"}},bt={class:"text-body-1 font-weight-medium"},kt={class:"text-caption text-grey ml-2"},wt={__name:"PlayerView",props:{tournamentId:{type:[String,Number],required:!0},playerId:{type:[String,Number],required:!0}},setup(B){const b=B,u=Y(),C=U(),c=p(()=>u.activePlayer);p(()=>u.activePlayerGames),Q(()=>b.playerId,r=>{r&&b.tournamentId&&u.fetchPlayerData(r,b.tournamentId)},{immediate:!0});const D=()=>C.back(),z=r=>{r.pgn_moves&&C.push({name:"Game",params:{gameId:r.id}})},T=r=>{const e=V(r.result,r.color);return e==="1"?"success":e==="0"?"error":"grey"},S=p(()=>c.value?.rating_change||0),q=p(()=>{const r=S.value;return r>0?`+${r}`:r||0}),R=p(()=>{const r=S.value;return r>0?"text-success":r<0?"text-error":""}),_=p(()=>et({playerGames:u.activePlayerGames,ecoDatabase:u.ecoDatabase}));return(r,e)=>{const j=a("v-progress-circular"),F=a("v-btn"),L=a("v-avatar"),$=a("v-spacer"),I=a("v-divider"),x=a("v-card-text"),y=a("v-card"),m=a("v-icon"),v=a("v-col"),k=a("v-row"),w=a("v-card-title"),P=a("v-progress-linear"),E=a("v-table"),A=a("v-list-item-title"),H=a("v-chip"),J=a("v-list-item"),K=a("v-list"),M=a("v-alert");return d(),f("div",null,[g(u).isLoadingDetails&&!c.value?(d(),f("div",st,[t(j,{indeterminate:"",color:"primary",size:"64"}),e[0]||(e[0]=s("div",{class:"mt-4 text-grey"},"Загрузка профиля игрока...",-1))])):c.value?(d(),f("div",lt,[t(y,{class:"mb-6"},{default:l(()=>[t(x,{class:"d-flex align-center"},{default:l(()=>[t(F,{icon:"mdi-arrow-left",variant:"text",onClick:D,class:"mr-4"}),t(L,{color:"primary",size:"64",class:"mr-6"},{default:l(()=>[s("span",nt,n(g(Z)(c.value.canonical_name)),1)]),_:1}),s("div",null,[s("h1",ot,n(c.value.canonical_name),1),s("div",at,n(c.value.club_city||c.value.federation),1)]),t($),s("div",rt,[e[1]||(e[1]=s("div",{class:"text-caption text-grey"},"МЕСТО",-1)),s("div",it,n(c.value.final_rank||"-"),1)]),t(I,{vertical:"",class:"mx-2"}),s("div",ct,[e[2]||(e[2]=s("div",{class:"text-caption text-grey"},"ОЧКИ",-1)),s("div",dt,n(c.value.score||"-"),1)])]),_:1})]),_:1}),t(k,null,{default:l(()=>[t(v,{cols:"12",md:"5"},{default:l(()=>[t(k,null,{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[t(y,null,{default:l(()=>[t(x,null,{default:l(()=>[t(k,null,{default:l(()=>[t(v,{class:"text-center"},{default:l(()=>[t(m,{color:"grey-darken-1",class:"mb-1"},{default:l(()=>[...e[3]||(e[3]=[i("mdi-chess-king",-1)])]),_:1}),e[4]||(e[4]=s("div",{class:"text-caption text-grey"},"Рейтинг",-1)),s("div",ut,n(c.value.rating_at_tournament),1)]),_:1}),t(v,{class:"text-center"},{default:l(()=>[t(m,{color:"grey-darken-1",class:"mb-1"},{default:l(()=>[...e[5]||(e[5]=[i("mdi-finance",-1)])]),_:1}),e[6]||(e[6]=s("div",{class:"text-caption text-grey"},"Перфоманс",-1)),s("div",_t,n(c.value.performance_rating||"-"),1)]),_:1}),t(v,{class:"text-center"},{default:l(()=>[t(m,{color:"grey-darken-1",class:"mb-1"},{default:l(()=>[...e[7]||(e[7]=[i("mdi-arrow-up-down-bold",-1)])]),_:1}),e[8]||(e[8]=s("div",{class:"text-caption text-grey"},"+/- Рейтинга",-1)),s("div",{class:W(["text-h6",R.value])},n(q.value),3)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12"},{default:l(()=>[t(y,null,{default:l(()=>[t(w,{class:"text-subtitle-1"},{default:l(()=>[...e[9]||(e[9]=[i("Результативность по цвету",-1)])]),_:1}),t(x,null,{default:l(()=>[s("div",vt,[s("div",mt,[t(m,{icon:"mdi-circle-outline",class:"mr-2"}),e[10]||(e[10]=i("Белые",-1))]),t(P,{"model-value":_.value.colorStats.white.percent,color:"grey-lighten-2",height:"22",rounded:""},{default:l(()=>[s("strong",null,n(_.value.colorStats.white.points)+" / "+n(_.value.colorStats.white.games),1)]),_:1},8,["model-value"])]),s("div",pt,[s("div",ft,[t(m,{icon:"mdi-circle",class:"mr-2"}),e[11]||(e[11]=i("Черные",-1))]),t(P,{"model-value":_.value.colorStats.black.percent,color:"grey-darken-2",height:"22",rounded:""},{default:l(()=>[s("strong",null,n(_.value.colorStats.black.points)+" / "+n(_.value.colorStats.black.games),1)]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1}),t(v,{cols:"12"},{default:l(()=>[t(y,null,{default:l(()=>[t(w,{class:"text-subtitle-1"},{default:l(()=>[...e[12]||(e[12]=[i("Дебютный репертуар",-1)])]),_:1}),_.value.openingStats.length>0?(d(),h(x,{key:0},{default:l(()=>[t(E,{density:"compact"},{default:l(()=>[e[13]||(e[13]=s("thead",null,[s("tr",null,[s("th",null,"Дебют"),s("th",{class:"text-center"},"Партий"),s("th",{class:"text-center"},"Результат")])],-1)),s("tbody",null,[(d(!0),f(G,null,N(_.value.openingStats,o=>(d(),f("tr",{key:o.name},[s("td",null,[s("div",null,n(o.name),1),s("div",gt,n(o.eco),1)]),s("td",xt,n(o.count),1),s("td",yt,n(o.points)+" / "+n(o.count),1)]))),128))])]),_:1})]),_:1})):(d(),h(x,{key:1,class:"text-center text-grey"},{default:l(()=>[...e[14]||(e[14]=[i(" Нет данных по дебютам. ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"7"},{default:l(()=>[t(y,{class:"fill-height"},{default:l(()=>[t(w,{class:"text-subtitle-1"},{default:l(()=>[i("Сыгранные партии ("+n(g(u).activePlayerGames.length)+")",1)]),_:1}),t(I),t(K,{class:"game-list"},{default:l(()=>[(d(!0),f(G,null,N(g(u).activePlayerGames,o=>(d(),h(J,{key:o.game_id,onClick:Ct=>z(o),disabled:!o.pgn_moves,class:"game-list-item"},{prepend:l(()=>[s("div",ht,[e[15]||(e[15]=s("div",{class:"text-caption text-grey"},"Тур",-1)),s("div",bt,n(o.round),1)])]),append:l(()=>[t(H,{color:T(o),label:"",class:"font-weight-bold",style:{width:"50px","justify-content":"center"}},{default:l(()=>[i(n(g(V)(o.result,o.color)),1)]),_:2},1032,["color"]),o.pgn_moves?(d(),h(m,{key:0,class:"ml-4 text-grey"},{default:l(()=>[...e[16]||(e[16]=[i("mdi-chevron-right",-1)])]),_:1})):X("",!0)]),default:l(()=>[t(A,{class:"font-weight-bold d-flex align-center"},{default:l(()=>[t(m,{size:"small",icon:g(tt)(o.color),class:"mr-2"},null,8,["icon"]),s("span",null,"vs "+n(o.opponent_name),1),s("span",kt,"("+n(o.opponent_rating||"-")+")",1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})])):(d(),h(M,{key:2,type:"warning",class:"mt-4"},{default:l(()=>[...e[17]||(e[17]=[i("Игрок не найден.",-1)])]),_:1}))])}}},Vt=O(wt,[["__scopeId","data-v-5ab78d4f"]]);export{Vt as default};
