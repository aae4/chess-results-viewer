import{u as N,c as O,f as y,m as p,i as l,w as t,r as u,d as R,o as r,h as o,a as v,e as n,t as i,F as $,k as T,x as k,z as x}from"./index-Bs-bhPNR.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={key:0},H={class:"text-h6"},L={class:"text-h5 font-weight-bold text-success"},M={class:"text-h6"},j={class:"text-h5 font-weight-bold"},q={class:"stacked-bar mb-4"},A={class:"results-legend"},J={class:"legend-item"},K={class:"text-caption"},Q={class:"legend-item"},U={class:"text-caption"},X={class:"legend-item"},Y={class:"text-caption"},Z={class:"text-caption text-grey"},tt={class:"stacked-bar-mini my-1"},et={__name:"StatisticsView",setup(lt){const C=N(),V=R(),e=O(()=>C.statistics),S=[{title:"Дебют",key:"name",sortable:!1,align:"start"},{title:"Партий",key:"count",sortable:!1,align:"center",width:"120px"},{title:"Результаты (Б/Н/Ч)",key:"results",sortable:!1,align:"center",width:"200px"}],h=f=>{if(f&&f.round&&f.board){const s=`${f.round}-${f.board}`;V.push({name:"game",params:{id:s}})}};return(f,s)=>{const m=u("v-card-title"),c=u("v-list-item"),D=u("v-list"),_=u("v-card"),d=u("v-col"),P=u("v-icon"),b=u("v-card-text"),z=u("v-card-subtitle"),B=u("v-chip"),g=u("v-row"),w=u("v-tooltip"),W=u("v-list-item-title"),G=u("v-list-item-subtitle"),F=u("v-data-table");return e.value?(r(),y("div",E,[l(g,null,{default:t(()=>[l(d,{cols:"12",md:"4"},{default:t(()=>[l(g,null,{default:t(()=>[l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[2]||(s[2]=[o("Обзор турнира",-1)])]),_:1}),l(D,{density:"compact"},{default:t(()=>[l(c,{title:`${e.value.totalPlayers}`,subtitle:"Участников","prepend-icon":"mdi-account-group-outline"},null,8,["title"]),l(c,{title:`${e.value.totalRounds}`,subtitle:"Туров","prepend-icon":"mdi-recycle"},null,8,["title"]),l(c,{title:`${e.value.averageRating}`,subtitle:"Средний рейтинг","prepend-icon":"mdi-finance"},null,8,["title"])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,{class:"text-center pa-4 fill-height"},{default:t(()=>[l(P,{size:"x-large",color:"amber"},{default:t(()=>[...s[3]||(s[3]=[o("mdi-rocket-launch-outline",-1)])]),_:1}),l(m,null,{default:t(()=>[...s[4]||(s[4]=[o("Главный прорыв",-1)])]),_:1}),e.value.biggestOverperformer?(r(),v(b,{key:0},{default:t(()=>[n("div",H,i(e.value.biggestOverperformer.player.name),1),n("div",L,"+"+i(e.value.biggestOverperformer.diff),1),s[5]||(s[5]=n("div",{class:"text-caption"},"пунктов перфоманса к рейтингу",-1))]),_:1})):p("",!0)]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,{class:"text-center pa-4 fill-height"},{default:t(()=>[l(P,{size:"x-large",color:"red-lighten-1"},{default:t(()=>[...s[6]||(s[6]=[o("mdi-sword-cross",-1)])]),_:1}),l(m,null,{default:t(()=>[...s[7]||(s[7]=[o("Самый бескомпромиссный",-1)])]),_:1}),e.value.mostDecisivePlayer?(r(),v(b,{key:0},{default:t(()=>[n("div",M,i(e.value.mostDecisivePlayer.player.name),1),n("div",j,i(e.value.mostDecisivePlayer.drawRate.toFixed(0))+"% ничьих",1),s[8]||(s[8]=n("div",{class:"text-caption"},"самый низкий процент в турнире",-1))]),_:1})):p("",!0)]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[9]||(s[9]=[o("Непобежденные игроки",-1)])]),_:1}),e.value.undefeatedPlayers.length>0?(r(),v(z,{key:0},{default:t(()=>[o("Всего: "+i(e.value.undefeatedPlayers.length),1)]),_:1})):p("",!0),e.value.undefeatedPlayers.length>0?(r(),v(b,{key:1},{default:t(()=>[(r(!0),y($,null,T(e.value.undefeatedPlayers,a=>(r(),v(B,{key:a.name,class:"ma-1"},{default:t(()=>[o(i(a.name)+" ("+i(a.points)+")",1)]),_:2},1024))),128))]),_:1})):(r(),v(b,{key:2,class:"text-center text-grey"},{default:t(()=>[...s[10]||(s[10]=[o("Таких игроков нет.",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12",md:"8"},{default:t(()=>[l(g,null,{default:t(()=>[l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[11]||(s[11]=[o("Распределение результатов",-1)])]),_:1}),l(b,null,{default:t(()=>[n("div",q,[l(w,{location:"top"},{activator:t(({props:a})=>[n("div",k(a,{class:"bar-segment white-wins",style:{width:e.value.resultDistribution.whiteWinPercent+"%"}}),null,16)]),default:t(()=>[n("span",null,"Белые: "+i(e.value.resultDistribution.whiteWins)+" побед ("+i(e.value.resultDistribution.whiteWinPercent)+"%)",1)]),_:1}),l(w,{location:"top"},{activator:t(({props:a})=>[n("div",k(a,{class:"bar-segment draws",style:{width:e.value.resultDistribution.drawPercent+"%"}}),null,16)]),default:t(()=>[n("span",null,"Ничьи: "+i(e.value.resultDistribution.draws)+" ("+i(e.value.resultDistribution.drawPercent)+"%)",1)]),_:1}),l(w,{location:"top"},{activator:t(({props:a})=>[n("div",k(a,{class:"bar-segment black-wins",style:{width:e.value.resultDistribution.blackWinPercent+"%"}}),null,16)]),default:t(()=>[n("span",null,"Черные: "+i(e.value.resultDistribution.blackWins)+" побед ("+i(e.value.resultDistribution.blackWinPercent)+"%)",1)]),_:1})]),n("div",A,[n("div",J,[s[13]||(s[13]=n("span",{class:"legend-dot white-wins"},null,-1)),n("div",null,[s[12]||(s[12]=n("div",{class:"font-weight-bold"},"Победы белых",-1)),n("div",K,i(e.value.resultDistribution.whiteWins)+" ("+i(e.value.resultDistribution.whiteWinPercent)+"%)",1)])]),n("div",Q,[s[15]||(s[15]=n("span",{class:"legend-dot draws"},null,-1)),n("div",null,[s[14]||(s[14]=n("div",{class:"font-weight-bold"},"Ничьи",-1)),n("div",U,i(e.value.resultDistribution.draws)+" ("+i(e.value.resultDistribution.drawPercent)+"%)",1)])]),n("div",X,[s[17]||(s[17]=n("span",{class:"legend-dot black-wins"},null,-1)),n("div",null,[s[16]||(s[16]=n("div",{class:"font-weight-bold"},"Победы черных",-1)),n("div",Y,i(e.value.resultDistribution.blackWins)+" ("+i(e.value.resultDistribution.blackWinPercent)+"%)",1)])])])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[18]||(s[18]=[o("Динамика партий",-1)])]),_:1}),l(D,null,{default:t(()=>[e.value.longestGame?(r(),v(c,{key:0,"prepend-icon":"mdi-timer-sand-complete",onClick:s[0]||(s[0]=a=>h(e.value.longestGame.game)),style:{cursor:"pointer"}},{default:t(()=>[l(W,null,{default:t(()=>[o("Самая длинная партия: "+i(e.value.longestGame.moves)+" ходов",1)]),_:1}),l(G,null,{default:t(()=>[o(i(e.value.longestGame.game.whitePlayer.name)+" vs "+i(e.value.longestGame.game.blackPlayer.name),1)]),_:1})]),_:1})):p("",!0),e.value.shortestGame?(r(),v(c,{key:1,"prepend-icon":"mdi-timer-sand-empty",onClick:s[1]||(s[1]=a=>h(e.value.shortestGame.game)),style:{cursor:"pointer"}},{default:t(()=>[l(W,null,{default:t(()=>[o("Самая короткая партия: "+i(e.value.shortestGame.moves)+" ходов",1)]),_:1}),l(G,null,{default:t(()=>[o(i(e.value.shortestGame.game.whitePlayer.name)+" vs "+i(e.value.shortestGame.game.blackPlayer.name),1)]),_:1})]),_:1})):p("",!0),l(c,{"prepend-icon":"mdi-timer-sand",title:`Средняя длина партии: ${e.value.averageMoveCount} ходов`},null,8,["title"]),l(c,{"prepend-icon":"mdi-chess-rook",title:`Всего рокировок: ${e.value.totalCastles}`},null,8,["title"]),l(c,{"prepend-icon":"mdi-chess-pawn",title:`Всего превращений пешек: ${e.value.totalPromotions}`},null,8,["title"])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[19]||(s[19]=[o("Дебютные тренды",-1)])]),_:1}),l(F,{headers:S,items:e.value.topOpenings,"items-per-page":10,density:"compact"},{"item.name":t(({item:a})=>[n("div",null,i(a.name),1),n("div",Z,i(a.eco),1)]),"item.count":t(({item:a})=>[e.value.resultDistribution?(r(),y($,{key:0},[o(i(a.count)+" ("+i((a.count/(e.value.resultDistribution.whiteWins+e.value.resultDistribution.blackWins+e.value.resultDistribution.draws)*100).toFixed(0))+"%) ",1)],64)):p("",!0)]),"item.results":t(({item:a})=>[n("div",tt,[n("div",{class:"bar-segment white-wins",style:x({width:a.white/a.count*100+"%"})},null,4),n("div",{class:"bar-segment draws",style:x({width:a.draw/a.count*100+"%"})},null,4),n("div",{class:"bar-segment black-wins",style:x({width:a.black/a.count*100+"%"})},null,4)])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):p("",!0)}}},it=I(et,[["__scopeId","data-v-d5636edf"]]);export{it as default};
