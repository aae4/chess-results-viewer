import{u as E}from"./tournamentStore-kFjarByM.js";import{_ as Q,r as V,o as W,w as G,c as m,a as _,b as t,d as x,e as n,f as a,u as h,g as v,h as C,i as r,j as i,t as p,F as H,k as J}from"./index-BGOagHph.js";const K={key:0,class:"text-center pa-10"},O={key:2,class:"text-center text-grey pa-10"},R={key:3},X={class:"text-h4 font-weight-bold"},Z={class:"text-subtitle-1 text-grey-darken-1 mt-1"},L=10,$={__name:"TournamentsListView",setup(ee){const o=E(),u=V(""),d=V(null),f=V(1);W(()=>{o.tournamentsList.length===0&&o.fetchAllTournaments()}),G([u,d],()=>{f.value=1});const S=m(()=>{if(!o.tournamentsList)return[];const s=new Set(o.tournamentsList.map(e=>e.start_date.substring(0,4)));return Array.from(s).sort((e,c)=>c-e)}),g=m(()=>{if(!o.tournamentsList)return[];let s=[...o.tournamentsList];if(d.value&&(s=s.filter(e=>e.start_date.startsWith(d.value))),u.value){const e=u.value.toLowerCase();s=s.filter(c=>c.name.toLowerCase().includes(e))}return s}),y=m(()=>o.tournamentsList[0]||null),k=m(()=>Math.ceil(g.value.length/L)),z=m(()=>{const s=(f.value-1)*L,e=s+L;return d.value||u.value?g.value.slice(s,e):g.value.slice(s+1,e+1)});return(s,e)=>{const c=a("v-toolbar-title"),w=a("v-spacer"),B=a("v-text-field"),N=a("v-select"),P=a("v-toolbar"),T=a("v-card"),I=a("v-progress-circular"),U=a("v-alert"),b=a("v-icon"),A=a("v-chip"),F=a("v-card-text"),M=a("v-list-item-title"),Y=a("v-list-item-subtitle"),j=a("v-list-item"),q=a("v-list"),D=a("v-pagination");return r(),_("div",null,[t(T,{class:"mb-6",flat:"",border:""},{default:n(()=>[t(P,{flat:"",color:"transparent"},{default:n(()=>[t(c,{class:"mx-2"},{default:n(()=>[...e[3]||(e[3]=[i("Все турниры",-1)])]),_:1}),t(w),t(B,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),label:"Поиск по названию...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field"},null,8,["modelValue"]),t(N,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),items:S.value,label:"Год",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"year-select"},null,8,["modelValue","items"])]),_:1})]),_:1}),h(o).isLoadingList?(r(),_("div",K,[t(I,{indeterminate:"",color:"primary",size:"64"})])):h(o).error?(r(),x(U,{key:1,type:"error",prominent:""},{default:n(()=>[i(" Не удалось загрузить список турниров: "+p(h(o).error),1)]),_:1})):g.value.length===0?(r(),_("div",O,[t(b,{size:"x-large"},{default:n(()=>[...e[4]||(e[4]=[i("mdi-database-off-outline",-1)])]),_:1}),e[5]||(e[5]=v("div",{class:"mt-4 text-h6"},"Турниры не найдены",-1)),e[6]||(e[6]=v("div",{class:"mt-1"},"По вашему запросу ничего не найдено. Попробуйте изменить фильтры.",-1))])):(r(),_("div",R,[y.value&&!d.value&&!u.value?(r(),x(T,{key:0,class:"mb-8 hero-card",to:{name:"Standings",params:{tournamentId:y.value.id}}},{default:n(()=>[t(F,{class:"d-flex align-center"},{default:n(()=>[v("div",null,[t(A,{color:"primary",label:"",class:"mb-2"},{default:n(()=>[t(b,{start:"",icon:"mdi-new-box"}),e[7]||(e[7]=i(" Последний турнир ",-1))]),_:1}),v("h2",X,p(y.value.name),1),v("div",Z,p(y.value.start_date),1)]),t(w),t(b,{size:"64",color:"grey-lighten-2"},{default:n(()=>[...e[8]||(e[8]=[i("mdi-chevron-right",-1)])]),_:1})]),_:1})]),_:1},8,["to"])):C("",!0),t(q,{lines:"two",class:"py-0"},{default:n(()=>[(r(!0),_(H,null,J(z.value,l=>(r(),x(j,{key:l.id,to:{name:"Standings",params:{tournamentId:l.id}},class:"list-item-card mb-2",border:"",rounded:""},{prepend:n(()=>[t(b,{color:"grey",size:"large"},{default:n(()=>[...e[9]||(e[9]=[i("mdi-trophy-variant-outline",-1)])]),_:1})]),default:n(()=>[t(M,{class:"text-h6 font-weight-medium"},{default:n(()=>[i(p(l.name),1)]),_:2},1024),t(Y,null,{default:n(()=>[i(p(l.start_date),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1}),k.value>1?(r(),x(D,{key:1,modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),length:k.value,rounded:"circle",class:"mt-6"},null,8,["modelValue","length"])):C("",!0)]))])}}},ne=Q($,[["__scopeId","data-v-c000c188"]]);export{ne as default};
