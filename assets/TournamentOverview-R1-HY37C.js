import{u as $,c as D,a as c,h as v,l as s,b as n,r as i,w as e,C as q,f as u,e as a,g as d,t as l,F as g,i as N,d as h,D as k}from"./index-D-xIhes9.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={key:0,class:"text-center pa-10"},J={key:1},K={class:"text-center text-md-left mb-4 mb-md-0"},M={key:0,class:"text-h4 font-weight-bold mt-2"},Q={key:1,class:"text-h4 font-weight-bold mt-2"},U={key:2,class:"text-subtitle-1 opacity-70 mt-1"},X={class:"d-flex ga-4"},Y={class:"text-h5 font-weight-bold text-primary"},Z={class:"font-weight-bold"},tt={class:"font-weight-bold text-caption"},et={class:"font-weight-bold"},nt={class:"font-weight-bold"},ot={class:"text-h6 font-weight-bold mb-3"},st={key:0,class:"text-caption font-weight-regular text-medium-emphasis ml-2"},at={class:"d-flex align-center justify-center rounded bg-grey-lighten-4 font-weight-bold mr-4",style:{width:"48px",height:"48px"}},lt={class:"text-caption"},rt={__name:"TournamentOverview",setup(it){const o=$(),V=q(),T=D(()=>o.standings.slice(0,3)),y=D(()=>{if(!o.activeTournament)return!1;const m=new Date().toISOString().split("T")[0];return o.activeTournament.end_date<m}),F=m=>{V.push({name:"Player",params:{tournamentId:o.activeTournament.id,playerId:m}})},O=m=>m===1?"rank-gold":m===2?"rank-silver":m===3?"rank-bronze":"",I=(m,t)=>m==="1-0"&&t==="white"||m==="0-1"&&t==="black";return(m,t)=>{const P=i("v-progress-circular"),L=i("v-chip"),x=i("v-btn"),E=i("v-card-text"),w=i("v-card"),R=i("v-list-item-title"),C=i("v-list-item-subtitle"),j=i("v-list-item"),G=i("v-divider"),S=i("v-list"),z=i("v-card-actions"),_=i("v-icon"),b=i("v-sheet"),f=i("v-col"),B=i("v-row"),W=i("v-alert");return u(),c("div",null,[s(o).isLoadingDetails?(u(),c("div",H,[n(P,{indeterminate:"",color:"primary",size:"64"})])):s(o).activeTournament?(u(),c("div",J,[n(w,{class:"mb-6 bg-primary-lighten-5",elevation:"2",border:""},{default:e(()=>[n(E,{class:"d-flex flex-column flex-md-row align-center justify-space-between pa-6"},{default:e(()=>[a("div",K,[n(L,{color:y.value?"grey":"green",variant:"flat",class:"font-weight-bold mb-2","prepend-icon":"mdi-information"},{default:e(()=>[d(l(y.value?"Турнир завершен":"Турнир идет"),1)]),_:1},8,["color"]),!y.value&&s(o).nextRoundInfo?(u(),c("h2",M,l(s(o).nextRoundInfo.name),1)):(u(),c("h2",Q," Победитель определен ")),s(o).nextRoundInfo&&s(o).nextRoundInfo.date?(u(),c("div",U,l(s(o).nextRoundInfo.date)+" "+l(s(o).nextRoundInfo.time),1)):v("",!0)]),a("div",X,[n(x,{variant:"outlined","prepend-icon":"mdi-format-list-numbered",to:{name:"Standings",params:{tournamentId:s(o).activeTournament.id}}},{default:e(()=>[...t[0]||(t[0]=[d(" Таблица ",-1)])]),_:1},8,["to"]),n(x,{variant:"flat",color:"primary","prepend-icon":"mdi-chess-pawn",to:{name:"Rounds",params:{tournamentId:s(o).activeTournament.id}}},{default:e(()=>[...t[1]||(t[1]=[d(" Смотреть пары ",-1)])]),_:1},8,["to"])])]),_:1})]),_:1}),n(B,null,{default:e(()=>[n(f,{cols:"12",md:"5",lg:"4"},{default:e(()=>[t[11]||(t[11]=a("h3",{class:"text-h6 font-weight-bold mb-3"},"Лидеры турнира",-1)),n(w,{class:"mb-6",border:"",flat:""},{default:e(()=>[n(S,{lines:"two",class:"py-0"},{default:e(()=>[(u(!0),c(g,null,N(T.value,(r,p)=>(u(),c(g,{key:r.player_id},[n(j,{onClick:dt=>F(r.player_id),class:"py-3"},{prepend:e(()=>[a("div",{class:k(["rank-badge",O(p+1)])},l(p+1),3)]),append:e(()=>[a("div",Y,l(r.score),1)]),default:e(()=>[n(R,{class:"font-weight-bold text-h6 ml-4"},{default:e(()=>[d(l(r.name),1)]),_:2},1024),n(C,{class:"ml-4 text-body-2"},{default:e(()=>[d(" Рейтинг: "+l(r.rating_at_tournament),1)]),_:2},1024)]),_:2},1032,["onClick"]),p<T.value.length-1?(u(),h(G,{key:0})):v("",!0)],64))),128))]),_:1}),n(z,null,{default:e(()=>[n(x,{block:"",variant:"text",color:"primary",to:{name:"Standings",params:{tournamentId:s(o).activeTournament.id}}},{default:e(()=>[...t[2]||(t[2]=[d(" Показать всех участников ",-1)])]),_:1},8,["to"])]),_:1})]),_:1}),t[12]||(t[12]=a("h3",{class:"text-h6 font-weight-bold mb-3"},"Информация",-1)),n(B,{dense:""},{default:e(()=>[n(f,{cols:"6"},{default:e(()=>[n(b,{class:"pa-3 border rounded text-center fill-height d-flex flex-column justify-center align-center"},{default:e(()=>[n(_,{color:"primary",class:"mb-1"},{default:e(()=>[...t[3]||(t[3]=[d("mdi-account-group",-1)])]),_:1}),t[4]||(t[4]=a("div",{class:"text-caption text-medium-emphasis"},"Участников",-1)),a("div",Z,l(s(o).participants.length),1)]),_:1})]),_:1}),n(f,{cols:"6"},{default:e(()=>[n(b,{class:"pa-3 border rounded text-center fill-height d-flex flex-column justify-center align-center"},{default:e(()=>[n(_,{color:"primary",class:"mb-1"},{default:e(()=>[...t[5]||(t[5]=[d("mdi-timer-outline",-1)])]),_:1}),t[6]||(t[6]=a("div",{class:"text-caption text-medium-emphasis"},"Контроль",-1)),a("div",tt,l(s(o).activeTournament.time_control||`60' + 30"`),1)]),_:1})]),_:1}),n(f,{cols:"6"},{default:e(()=>[n(b,{class:"pa-3 border rounded text-center fill-height d-flex flex-column justify-center align-center"},{default:e(()=>[n(_,{color:"primary",class:"mb-1"},{default:e(()=>[...t[7]||(t[7]=[d("mdi-map-marker",-1)])]),_:1}),t[8]||(t[8]=a("div",{class:"text-caption text-medium-emphasis"},"Город",-1)),a("div",et,l(s(o).activeTournament.city||"Москва"),1)]),_:1})]),_:1}),n(f,{cols:"6"},{default:e(()=>[n(b,{class:"pa-3 border rounded text-center fill-height d-flex flex-column justify-center align-center"},{default:e(()=>[n(_,{color:"primary",class:"mb-1"},{default:e(()=>[...t[9]||(t[9]=[d("mdi-calendar-range",-1)])]),_:1}),t[10]||(t[10]=a("div",{class:"text-caption text-medium-emphasis"},"Туров",-1)),a("div",nt,l(s(o).activeTournament.rounds_count),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(f,{cols:"12",md:"7",lg:"8"},{default:e(()=>[a("h3",ot,[t[13]||(t[13]=d(" Последние партии ",-1)),s(o).recentGames.length?(u(),c("span",st," (Тур "+l(s(o).recentGames[0].round)+") ",1)):v("",!0)]),s(o).recentGames.length?(u(),h(w,{key:0,border:"",flat:""},{default:e(()=>[n(S,{lines:"two"},{default:e(()=>[(u(!0),c(g,null,N(s(o).recentGames,(r,p)=>(u(),c(g,{key:r.id},[n(j,{to:{name:"Game",params:{gameId:r.id}}},{prepend:e(()=>[a("div",at,l(r.result),1)]),append:e(()=>[n(_,null,{default:e(()=>[...t[17]||(t[17]=[d("mdi-chevron-right",-1)])]),_:1})]),default:e(()=>[n(R,{class:"mb-1"},{default:e(()=>[a("span",{class:k({"font-weight-bold":I(r.result,"white")})},l(r.white_player.name),3),t[14]||(t[14]=a("span",{class:"text-medium-emphasis text-caption mx-1"},"vs",-1)),a("span",{class:k({"font-weight-bold":I(r.result,"black")})},l(r.black_player.name),3)]),_:2},1024),n(C,{class:"d-flex align-center"},{default:e(()=>[n(_,{size:"small",class:"mr-1"},{default:e(()=>[...t[15]||(t[15]=[d("mdi-table-furniture",-1)])]),_:1}),d(" Доска "+l(r.board)+" ",1),t[16]||(t[16]=a("span",{class:"mx-2"},"·",-1)),a("span",lt,"Рейтинги: "+l(r.white_player.rating)+" vs "+l(r.black_player.rating),1)]),_:2},1024)]),_:2},1032,["to"]),p<s(o).recentGames.length-1?(u(),h(G,{key:0})):v("",!0)],64))),128))]),_:1}),n(z,null,{default:e(()=>[n(x,{block:"",variant:"tonal",to:{name:"Rounds",params:{tournamentId:s(o).activeTournament.id}}},{default:e(()=>[...t[18]||(t[18]=[d(" Смотреть все партии ",-1)])]),_:1},8,["to"])]),_:1})]),_:1})):(u(),h(W,{key:1,type:"info",variant:"tonal",class:"mt-2"},{default:e(()=>[...t[19]||(t[19]=[d(" Партии пока не загружены или турнир еще не начался. ",-1)])]),_:1}))]),_:1})]),_:1})])):v("",!0)])}}},ct=A(rt,[["__scopeId","data-v-e84d7d33"]]);export{ct as default};
