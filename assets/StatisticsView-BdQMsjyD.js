import{u as B,c as N,a as g,g as O,b as l,f as u,e as t,q as R,j as r,k as o,d as v,i as b,h as a,t as n,F as L,l as j,y as x,z as q,A as h}from"./index-BcxP4QdH.js";import{c as A}from"./statisticsCalculator-C-L2fKx2.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./formatters-D4D2rNmP.js";import"./chess-DX7QKCjj.js";const H={key:0,class:"text-center pa-10"},M={key:1,class:"text-center text-grey pa-10"},I={key:2},J={class:"text-h6"},K={class:"text-h5 font-weight-bold text-success"},Q={class:"text-h6"},U={class:"text-h5 font-weight-bold"},X={class:"stacked-bar mb-4"},Y={class:"results-legend"},Z={class:"legend-item"},tt={class:"text-caption"},et={class:"legend-item"},lt={class:"text-caption"},st={class:"legend-item"},at={class:"text-caption"},nt={class:"text-caption text-grey"},it={class:"stacked-bar-mini my-1"},ot={__name:"StatisticsView",setup(ut){const p=B(),$=R(),e=N(()=>A({participants:p.participants,gamesForStats:p.statisticsData,standings:p.standings,tournamentDetails:p.activeTournament,ecoDatabase:p.ecoDatabase})),C=[{title:"Дебют",key:"name",sortable:!1,align:"start"},{title:"Партий",key:"count",sortable:!1,align:"center",width:"120px"},{title:"Результаты (Б/Н/Ч)",key:"results",sortable:!1,align:"center",width:"200px"}],D=w=>{w&&$.push({name:"Game",params:{gameId:w}})};return(w,s)=>{const V=u("v-progress-circular"),m=u("v-card-title"),c=u("v-list-item"),P=u("v-list"),_=u("v-card"),d=u("v-col"),G=u("v-icon"),f=u("v-card-text"),F=u("v-card-subtitle"),T=u("v-chip"),y=u("v-row"),k=u("v-tooltip"),W=u("v-list-item-title"),S=u("v-list-item-subtitle"),z=u("v-data-table");return r(),g("div",null,[O(p).isLoadingDetails?(r(),g("div",H,[l(V,{indeterminate:"",color:"primary"})])):e.value?(r(),g("div",I,[l(y,null,{default:t(()=>[l(d,{cols:"12",md:"4"},{default:t(()=>[l(y,null,{default:t(()=>[l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[2]||(s[2]=[o("Обзор турнира",-1)])]),_:1}),l(P,{density:"compact"},{default:t(()=>[l(c,{title:`${e.value.totalPlayers}`,subtitle:"Участников","prepend-icon":"mdi-account-group-outline"},null,8,["title"]),l(c,{title:`${e.value.totalRounds}`,subtitle:"Туров","prepend-icon":"mdi-recycle"},null,8,["title"]),l(c,{title:`${e.value.averageRating}`,subtitle:"Средний рейтинг","prepend-icon":"mdi-finance"},null,8,["title"])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,{class:"text-center pa-4 fill-height"},{default:t(()=>[l(G,{size:"x-large",color:"amber"},{default:t(()=>[...s[3]||(s[3]=[o("mdi-rocket-launch-outline",-1)])]),_:1}),l(m,null,{default:t(()=>[...s[4]||(s[4]=[o("Главный прорыв",-1)])]),_:1}),e.value.biggestOverperformer?(r(),v(f,{key:0},{default:t(()=>[a("div",J,n(e.value.biggestOverperformer.player.name),1),a("div",K,"+"+n(e.value.biggestOverperformer.diff),1),s[5]||(s[5]=a("div",{class:"text-caption"},"пунктов перфоманса к рейтингу",-1))]),_:1})):b("",!0)]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,{class:"text-center pa-4 fill-height"},{default:t(()=>[l(G,{size:"x-large",color:"red-lighten-1"},{default:t(()=>[...s[6]||(s[6]=[o("mdi-sword-cross",-1)])]),_:1}),l(m,null,{default:t(()=>[...s[7]||(s[7]=[o("Самый бескомпромиссный",-1)])]),_:1}),e.value.mostDecisivePlayer?(r(),v(f,{key:0},{default:t(()=>[a("div",Q,n(e.value.mostDecisivePlayer.player.name),1),a("div",U,n(e.value.mostDecisivePlayer.drawRate.toFixed(0))+"% ничьих",1),s[8]||(s[8]=a("div",{class:"text-caption"},"самый низкий процент в турнире",-1))]),_:1})):b("",!0)]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[9]||(s[9]=[o("Непобежденные игроки",-1)])]),_:1}),e.value.undefeatedPlayers.length>0?(r(),v(F,{key:0},{default:t(()=>[o("Всего: "+n(e.value.undefeatedPlayers.length),1)]),_:1})):b("",!0),e.value.undefeatedPlayers.length>0?(r(),v(f,{key:1},{default:t(()=>[(r(!0),g(L,null,j(e.value.undefeatedPlayers,i=>(r(),v(T,{key:i.name,class:"ma-1"},{default:t(()=>[o(n(i.name)+" ("+n(i.score)+")",1)]),_:2},1024))),128))]),_:1})):(r(),v(f,{key:2,class:"text-center text-grey"},{default:t(()=>[...s[10]||(s[10]=[o("Таких игроков нет.",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12",md:"8"},{default:t(()=>[l(y,null,{default:t(()=>[l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[11]||(s[11]=[o("Распределение результатов",-1)])]),_:1}),l(f,null,{default:t(()=>[a("div",X,[l(k,{location:"top"},{activator:t(({props:i})=>[a("div",x(i,{class:"bar-segment white-wins",style:{width:e.value.resultDistribution.whiteWinPercent+"%"}}),null,16)]),default:t(()=>[a("span",null,"Белые: "+n(e.value.resultDistribution.whiteWins)+" ("+n(e.value.resultDistribution.whiteWinPercent)+"%)",1)]),_:1}),l(k,{location:"top"},{activator:t(({props:i})=>[a("div",x(i,{class:"bar-segment draws",style:{width:e.value.resultDistribution.drawPercent+"%"}}),null,16)]),default:t(()=>[a("span",null,"Ничьи: "+n(e.value.resultDistribution.draws)+" ("+n(e.value.resultDistribution.drawPercent)+"%)",1)]),_:1}),l(k,{location:"top"},{activator:t(({props:i})=>[a("div",x(i,{class:"bar-segment black-wins",style:{width:e.value.resultDistribution.blackWinPercent+"%"}}),null,16)]),default:t(()=>[a("span",null,"Черные: "+n(e.value.resultDistribution.blackWins)+" ("+n(e.value.resultDistribution.blackWinPercent)+"%)",1)]),_:1})]),a("div",Y,[a("div",Z,[s[13]||(s[13]=a("span",{class:"legend-dot white-wins"},null,-1)),a("div",null,[s[12]||(s[12]=a("div",{class:"font-weight-bold"},"Победы белых",-1)),a("div",tt,n(e.value.resultDistribution.whiteWins)+" ("+n(e.value.resultDistribution.whiteWinPercent)+"%)",1)])]),a("div",et,[s[15]||(s[15]=a("span",{class:"legend-dot draws"},null,-1)),a("div",null,[s[14]||(s[14]=a("div",{class:"font-weight-bold"},"Ничьи",-1)),a("div",lt,n(e.value.resultDistribution.draws)+" ("+n(e.value.resultDistribution.drawPercent)+"%)",1)])]),a("div",st,[s[17]||(s[17]=a("span",{class:"legend-dot black-wins"},null,-1)),a("div",null,[s[16]||(s[16]=a("div",{class:"font-weight-bold"},"Победы черных",-1)),a("div",at,n(e.value.resultDistribution.blackWins)+" ("+n(e.value.resultDistribution.blackWinPercent)+"%)",1)])])])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[18]||(s[18]=[o("Динамика партий",-1)])]),_:1}),l(P,null,{default:t(()=>[e.value.longestGame?(r(),v(c,{key:0,"prepend-icon":"mdi-timer-sand-complete",onClick:s[0]||(s[0]=i=>D(e.value.longestGame.game.id)),style:{cursor:"pointer"}},{default:t(()=>[l(W,null,{default:t(()=>[o("Самая длинная партия: "+n(e.value.longestGame.moves)+" ходов",1)]),_:1}),l(S,null,{default:t(()=>[o(n(e.value.longestGame.game.white_name)+" vs "+n(e.value.longestGame.game.black_name),1)]),_:1})]),_:1})):b("",!0),e.value.shortestGame?(r(),v(c,{key:1,"prepend-icon":"mdi-timer-sand-empty",onClick:s[1]||(s[1]=i=>D(e.value.shortestGame.game.id)),style:{cursor:"pointer"}},{default:t(()=>[l(W,null,{default:t(()=>[o("Самая короткая партия: "+n(e.value.shortestGame.moves)+" ходов",1)]),_:1}),l(S,null,{default:t(()=>[o(n(e.value.shortestGame.game.white_name)+" vs "+n(e.value.shortestGame.game.black_name),1)]),_:1})]),_:1})):b("",!0),l(c,{"prepend-icon":"mdi-timer-sand",title:`Средняя длина партии: ${e.value.averageMoveCount} ходов`},null,8,["title"]),l(c,{"prepend-icon":"mdi-chess-rook",title:`Всего рокировок: ${e.value.totalCastles}`},null,8,["title"]),l(c,{"prepend-icon":"mdi-chess-pawn",title:`Всего превращений пешек: ${e.value.totalPromotions}`},null,8,["title"])]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[...s[19]||(s[19]=[o("Дебютные тренды",-1)])]),_:1}),l(z,{headers:C,items:e.value.topOpenings,"items-per-page":10,density:"compact"},q({"item.name":t(({item:i})=>[a("div",null,n(i.name),1),a("div",nt,n(i.eco),1)]),"item.results":t(({item:i})=>[a("div",it,[a("div",{class:"bar-segment white-wins",style:h({width:i.white/i.count*100+"%"})},null,4),a("div",{class:"bar-segment draws",style:h({width:i.draw/i.count*100+"%"})},null,4),a("div",{class:"bar-segment black-wins",style:h({width:i.black/i.count*100+"%"})},null,4)])]),_:2},[e.value.resultDistribution?{name:"item.count",fn:t(({item:i})=>[o(n(i.count)+" ("+n((i.count/(e.value.resultDistribution.whiteWins+e.value.resultDistribution.blackWins+e.value.resultDistribution.draws)*100).toFixed(0))+"%) ",1)]),key:"0"}:void 0]),1032,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):(r(),g("div",M," Недостаточно данных для генерации статистики. "))])}}},_t=E(ot,[["__scopeId","data-v-d04a9758"]]);export{_t as default};
