import{u as W,j as h,o as G,k as J,c as i,a as f,b as n,d as x,w as a,r as o,l as V,e as g,h as I,f as s,g as c,t as v,F as K,i as O}from"./index-C7cLTlNq.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={key:0,class:"text-center pa-10"},Z={key:2,class:"text-center text-grey pa-10"},$={key:3},tt={class:"text-h4 font-weight-bold"},et={class:"text-subtitle-1 mt-1"},L=10,nt={__name:"TournamentsListView",setup(ot){const r=W(),u=h(""),d=h(null),y=h(1);G(()=>{r.tournamentsList.length===0&&r.fetchAllTournaments()}),J([u,d],()=>{y.value=1});const m=i(()=>u.value||d.value?null:r.currentTournament),_=i(()=>{const e=r.currentTournament?.status;return e==="live"?{text:"LIVE",icon:"mdi-broadcast",color:"primary",variant:"tonal",chipColor:"primary"}:e==="upcoming"?{text:"СКОРО",icon:"mdi-calendar-clock",color:"secondary",variant:"tonal",chipColor:"secondary"}:e==="recent"?{text:"НЕДАВНО ЗАВЕРШИЛСЯ",icon:"mdi-history",color:void 0,variant:"elevated",chipColor:"primary"}:{text:"Последний турнир",icon:"mdi-new-box",color:void 0,variant:"elevated",chipColor:"primary"}}),P=i(()=>{if(!r.tournamentsList)return[];const e=new Set(r.tournamentsList.map(t=>t.start_date.substring(0,4)));return Array.from(e).sort((t,p)=>p-t)}),S=i(()=>r.tournamentsList),k=i(()=>{if(!r.tournamentsList)return[];let e=[...S.value];if(d.value&&(e=e.filter(t=>t.start_date.startsWith(d.value))),u.value){const t=u.value.toLowerCase();e=e.filter(p=>p.name.toLowerCase().includes(t))}return e}),w=i(()=>{const e=k.value;return m.value?e.filter(t=>t.id!==m.value.id):e}),T=i(()=>Math.ceil(w.value.length/L)),z=i(()=>{const e=(y.value-1)*L,t=e+L;return w.value.slice(e,t)});return(e,t)=>{const p=o("v-toolbar-title"),C=o("v-spacer"),B=o("v-text-field"),N=o("v-select"),U=o("v-toolbar"),F=o("v-card"),A=o("v-progress-circular"),E=o("v-alert"),b=o("v-icon"),M=o("v-chip"),Y=o("v-card-text"),j=o("v-list-item-title"),q=o("v-list-item-subtitle"),D=o("v-list-item"),H=o("v-list"),Q=o("v-pagination");return s(),f("div",null,[n(F,{class:"mb-6",flat:"",border:""},{default:a(()=>[n(U,{flat:"",color:"transparent"},{default:a(()=>[n(p,{class:"mx-2"},{default:a(()=>[...t[3]||(t[3]=[c("Все турниры",-1)])]),_:1}),n(C),n(B,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),label:"Поиск по названию...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field"},null,8,["modelValue"]),n(N,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),items:P.value,label:"Год",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"year-select"},null,8,["modelValue","items"])]),_:1})]),_:1}),V(r).isLoadingList?(s(),f("div",X,[n(A,{indeterminate:"",color:"primary",size:"64"})])):V(r).error?(s(),x(E,{key:1,type:"error",prominent:""},{default:a(()=>[c(" Не удалось загрузить список турниров: "+v(V(r).error),1)]),_:1})):k.value.length===0?(s(),f("div",Z,[n(b,{size:"x-large"},{default:a(()=>[...t[4]||(t[4]=[c("mdi-database-off-outline",-1)])]),_:1}),t[5]||(t[5]=g("div",{class:"mt-4 text-h6"},"Турниры не найдены",-1)),t[6]||(t[6]=g("div",{class:"mt-1"},"По вашему запросу ничего не найдено. Попробуйте изменить фильтры.",-1))])):(s(),f("div",$,[m.value?(s(),x(F,{key:0,class:"mb-8 hero-card",to:{name:"Standings",params:{tournamentId:m.value.id}},variant:_.value.variant,color:_.value.color},{default:a(()=>[n(Y,{class:"d-flex align-center"},{default:a(()=>[g("div",null,[n(M,{color:_.value.chipColor,label:"",class:"mb-2 font-weight-bold"},{default:a(()=>[n(b,{start:"",icon:_.value.icon},null,8,["icon"]),c(" "+v(_.value.text),1)]),_:1},8,["color"]),g("h2",tt,v(m.value.name),1),g("div",et,v(m.value.start_date),1)]),n(C),n(b,{size:"64",class:"d-none d-sm-block chevron-icon"},{default:a(()=>[...t[7]||(t[7]=[c("mdi-chevron-right",-1)])]),_:1})]),_:1})]),_:1},8,["to","variant","color"])):I("",!0),n(H,{lines:"two",class:"py-0"},{default:a(()=>[(s(!0),f(K,null,O(z.value,l=>(s(),x(D,{key:l.id,to:{name:"Standings",params:{tournamentId:l.id}},class:"list-item-card mb-2",border:"",rounded:""},{prepend:a(()=>[n(b,{color:"grey",size:"large"},{default:a(()=>[...t[8]||(t[8]=[c("mdi-trophy-variant-outline",-1)])]),_:1})]),default:a(()=>[n(j,{class:"text-h6 font-weight-medium"},{default:a(()=>[c(v(l.name),1)]),_:2},1024),n(q,null,{default:a(()=>[c(v(l.start_date),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1}),T.value>1?(s(),x(Q,{key:1,modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=l=>y.value=l),length:T.value,rounded:"circle",class:"mt-6"},null,8,["modelValue","length"])):I("",!0)]))])}}},lt=R(nt,[["__scopeId","data-v-a69614c0"]]);export{lt as default};
