import{u as Q,A as G,j as z,c as J,a as r,b as l,d as k,w as o,r as d,l as w,e as a,C as K,H as O,f as s,g as _,h as p,t as i,F as B,i as F,D as W}from"./index-OFearDcG.js";import{g as X}from"./formatters-C8Ln7w-r.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={key:0,class:"text-center pa-10"},tt={key:1,class:"text-center text-medium-emphasis pa-10"},et={class:"text-center rank-col"},nt={key:0,class:"text-center"},at={key:1,class:"text-center"},st=["onClick"],ot={class:"text-center rank-col"},rt={key:1,class:"text-h6 font-weight-medium text-medium-emphasis"},lt={key:1,class:"text-h6 font-weight-regular text-medium-emphasis"},it={class:"d-flex align-center py-2"},dt={class:"text-white font-weight-bold"},ct={class:"font-weight-bold text-subtitle-1"},ut={class:"text-caption text-medium-emphasis"},_t={key:0,class:"mr-2"},pt={key:0,class:"text-center"},mt={key:1,class:"text-center text-body-1 text-medium-emphasis"},vt={class:"text-center points-col font-weight-bold text-h6"},ft={key:3,class:"mobile-standings"},gt={class:"d-flex align-center pa-3"},kt={class:"d-flex align-center justify-center mr-4",style:{width:"40px"}},ht={key:0},xt={key:1,class:"text-h5 font-weight-bold text-medium-emphasis"},yt={class:"flex-grow-1"},bt={class:"text-subtitle-1 font-weight-bold line-clamp-1"},wt={class:"text-caption text-medium-emphasis"},Ct={class:"text-h5 font-weight-bold text-primary ml-2"},Vt={__name:"StandingsView",setup(zt){const v=Q(),I=K(),R=O(),D=G(),f=z(""),c=z("rank"),h=J(()=>{if(!v.standings)return[];let n=[...v.standings];if(f.value){const t=f.value.toLowerCase();n=n.filter(u=>u.name.toLowerCase().includes(t))}return c.value==="name"?n.sort((t,u)=>t.name.localeCompare(u.name)):c.value==="rating"&&n.sort((t,u)=>(u.rating_at_tournament||0)-(t.rating_at_tournament||0)),n}),x=n=>v.participants.find(t=>t.id===n),C=n=>{I.push({name:"Player",params:{tournamentId:R.params.tournamentId,playerId:n}})},N=n=>{const t=["#0052CC","#DE350B","#36B37E","#FFAB00","#6554C0","#00B8D9"],u=n.split("").reduce((g,m)=>g+m.charCodeAt(0),0)%t.length;return t[u]},A=n=>{const t=parseInt(n);return t===1?"rank-gold":t===2?"rank-silver":t===3?"rank-bronze":""},V=n=>{const t=parseInt(n);return t===1?"amber":t===2?"blue-grey-lighten-2":t===3?"brown-lighten-2":"grey"},S=n=>{if(n==null)return"";const t=parseFloat(n);return t>0?`+${t.toFixed(1)}`:t.toFixed(1)},L=n=>n==null?"default":parseFloat(n)>0?"success":"error";return(n,t)=>{const u=d("v-text-field"),g=d("v-col"),m=d("v-btn"),E=d("v-btn-toggle"),P=d("v-row"),T=d("v-card-text"),y=d("v-card"),U=d("v-progress-circular"),b=d("v-icon"),$=d("v-avatar"),j=d("v-chip"),q=d("v-table"),H=d("v-list");return s(),r("div",null,[l(y,{class:"mb-4",flat:"",border:""},{default:o(()=>[l(T,null,{default:o(()=>[l(P,{dense:"",align:"center"},{default:o(()=>[l(g,{cols:"12",sm:""},{default:o(()=>[l(u,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),label:"Поиск участника","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),l(g,{cols:"auto",class:"mx-auto"},{default:o(()=>[l(E,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),color:"primary",variant:"outlined",density:"compact",mandatory:"",divided:""},{default:o(()=>[l(m,{value:"rank","prepend-icon":"mdi-podium"},{default:o(()=>[...t[2]||(t[2]=[_("Место",-1)])]),_:1}),l(m,{value:"name","prepend-icon":"mdi-sort-alphabetical-variant"},{default:o(()=>[...t[3]||(t[3]=[_("Имя",-1)])]),_:1}),l(m,{value:"rating","prepend-icon":"mdi-star"},{default:o(()=>[...t[4]||(t[4]=[_("Рейтинг",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),w(v).isLoadingDetails?(s(),r("div",Z,[l(U,{indeterminate:"",color:"primary",size:"64"})])):h.value.length===0?(s(),r("div",tt,[l(b,{size:"64",class:"mb-2"},{default:o(()=>[...t[5]||(t[5]=[_("mdi-account-search-outline",-1)])]),_:1}),t[6]||(t[6]=a("div",null,"Участники не найдены",-1))])):w(D).mdAndUp.value?(s(),k(y,{key:2},{default:o(()=>[l(q,{class:"leaderboard-table",hover:""},{default:o(()=>[a("thead",null,[a("tr",null,[a("th",et,i(c.value==="rank"?"Место":"Ст. №"),1),t[7]||(t[7]=a("th",{class:"text-left"},"Игрок",-1)),c.value==="rank"?(s(),r("th",nt,"+/-")):p("",!0),c.value==="rank"?(s(),r("th",at,"Перф.")):p("",!0),t[8]||(t[8]=a("th",{class:"text-center points-col"},"Очки",-1))])]),a("tbody",null,[(s(!0),r(B,null,F(h.value,e=>(s(),r("tr",{key:e.player_id,class:"table-row",onClick:M=>C(e.player_id)},[a("td",ot,[c.value==="rank"?(s(),r("div",{key:0,class:W(["rank-indicator",A(e.final_rank)])},[e.final_rank<=3?(s(),k(b,{key:0,color:V(e.final_rank),size:"28"},{default:o(()=>[...t[9]||(t[9]=[_("mdi-trophy-variant",-1)])]),_:1},8,["color"])):(s(),r("span",rt,i(e.final_rank),1))],2)):(s(),r("div",lt,i(e.starting_rank),1))]),a("td",null,[a("div",it,[l($,{color:N(e.name),size:"40",class:"mr-4"},{default:o(()=>[a("span",dt,i(w(X)(e.name)),1)]),_:2},1032,["color"]),a("div",null,[a("div",ct,i(e.name),1),a("div",ut,[x(e.player_id)?.federation?(s(),r("span",_t,i(x(e.player_id).federation),1)):p("",!0),_(" Рейтинг: "+i(e.rating_at_tournament),1)])])])]),c.value==="rank"?(s(),r("td",pt,[e.rating_change?(s(),k(j,{key:0,color:L(e.rating_change),variant:"tonal",label:"",size:"small"},{default:o(()=>[_(i(S(e.rating_change)),1)]),_:2},1032,["color"])):p("",!0)])):p("",!0),c.value==="rank"?(s(),r("td",mt,i(e.performance_rating),1)):p("",!0),a("td",vt,i(e.score),1)],8,st))),128))])]),_:1})]),_:1})):(s(),r("div",ft,[l(H,{lines:"two",class:"bg-transparent"},{default:o(()=>[(s(!0),r(B,null,F(h.value,e=>(s(),k(y,{key:e.player_id,class:"mb-2 border",flat:"",onClick:M=>C(e.player_id)},{default:o(()=>[a("div",gt,[a("div",kt,[c.value==="rank"&&e.final_rank<=3?(s(),r("div",ht,[l(b,{color:V(e.final_rank),size:"32"},{default:o(()=>[...t[10]||(t[10]=[_("mdi-trophy",-1)])]),_:1},8,["color"])])):(s(),r("div",xt,i(c.value==="rank"?e.final_rank:e.starting_rank),1))]),a("div",yt,[a("div",bt,i(e.name),1),a("div",wt,i(x(e.player_id)?.federation)+" · Rtg: "+i(e.rating_at_tournament),1)]),a("div",Ct,i(e.score),1)])]),_:2},1032,["onClick"]))),128))]),_:1})]))])}}},Rt=Y(Vt,[["__scopeId","data-v-ea301ee6"]]);export{Rt as default};
