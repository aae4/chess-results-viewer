import{u as V,a as h,w as i,r as _,d as $,o as a,i as g,e as o,f as l,F as u,k as m,b as p,t as c,p as I,n as P,v as R,x as T,q}from"./index-Fh3QYsQe.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"text-center rank-col sticky-col"},L={class:"player-col sticky-col"},S=["onClick"],D=["onClick"],E={key:0,class:"self-play-cell"},G={class:"mr-1"},M={key:2},j={class:"text-center points-col font-weight-bold text-h6"},A={__name:"CrosstableView",setup(H){const f=V(),k=$(),x=t=>{t&&k.push({name:"player",params:{start_no:t}})},y=(t,e,r)=>{if(!t||!t.board||t.opponent_start_no===r)return;const d=`${e}-${t.board}`;k.push({name:"game",params:{id:d},query:{pov:r}})},C=(t,e)=>(console.log(t),!t||!t.opponent_start_no?"":t.opponent_start_no===e?"self-play-cell":t.points===1?"result-win":t.points===.5?"result-draw":t.points===0?"result-loss":"");return(t,e)=>{const r=_("v-icon"),d=_("v-tooltip"),w=_("v-table"),B=_("v-card");return a(),h(B,{class:"crosstable-wrapper"},{default:i(()=>[g(w,{class:"crosstable",density:"compact"},{default:i(()=>[o("thead",null,[o("tr",null,[e[0]||(e[0]=o("th",{class:"rank-col sticky-col"},"#",-1)),e[1]||(e[1]=o("th",{class:"player-col sticky-col"},"Игрок",-1)),(a(!0),l(u,null,m(p(f).roundsList,s=>(a(),l("th",{key:s,class:"text-center round-col"},c(s),1))),128)),e[2]||(e[2]=o("th",{class:"text-center points-col"},"Очки",-1))])]),o("tbody",null,[(a(!0),l(u,null,m(p(f).crosstable,s=>(a(),l("tr",{key:s.start_no},[o("td",F,c(s.start_no),1),o("td",L,[o("a",{href:"#",onClick:I(n=>x(s.start_no),["prevent"]),class:"player-link text-subtitle-1 font-weight-medium"},c(s.name),9,S)]),(a(!0),l(u,null,m(s.results,(n,v)=>(a(),l("td",{key:v,class:P(["text-center round-col result-cell",C(n,s.start_no)]),onClick:b=>y(n,v+1,s.start_no)},[n&&n.opponent_start_no===s.start_no?(a(),l("div",E)):n?(a(),h(d,{key:1,location:"top",disabled:!n.opponent_name},{activator:i(({props:b})=>[o("div",T({ref_for:!0},b,{class:"cell-content"}),[o("span",G,c(n.opponent_start_no),1),g(r,{icon:p(q)(n.color),size:"x-small"},null,8,["icon"])],16)]),default:i(()=>[o("span",null,c(p(R)(n.points))+" vs "+c(n.opponent_name),1)]),_:2},1032,["disabled"])):(a(),l("span",M,"-"))],10,D))),128)),o("td",j,c(s.totalPoints),1)]))),128))])]),_:1})]),_:1})}}},N=z(A,[["__scopeId","data-v-1aae1d07"]]);export{N as default};
