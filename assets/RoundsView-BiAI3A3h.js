import{_ as U,s as j,r as q,c as z,a as c,b as r,e as o,f as d,n as E,p as W,i as n,F as k,k as g,d as m,j as i,t as a,u as b,g as e,q as f,v as B,h as w}from"./index-BGOagHph.js";import{u as H}from"./tournamentStore-kFjarByM.js";import{f as C}from"./formatters-D4D2rNmP.js";const J={key:0,class:"text-center pa-10"},K={key:1,class:"text-center text-grey pa-10"},O={key:2},Q=["onClick"],X={class:"text-center text-grey"},Y={class:"text-right"},Z=["onClick"],tt={class:"text-caption text-grey"},et={class:"text-center"},st={class:"text-left"},ot=["onClick"],lt={class:"text-caption text-grey"},nt={class:"text-center"},at={class:"result-box"},rt={class:"d-flex align-baseline mb-1"},dt={class:"player-info"},ct={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},it={class:"d-flex align-baseline"},_t={class:"player-info"},ut={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},mt={__name:"RoundsView",setup(vt){const _=H(),V=E(),$=W(),A=j(),h=q(1),D=z(()=>{if(_.activeTournament?.rounds_count>0)return Array.from({length:_.activeTournament.rounds_count},(l,s)=>s+1);if(_.games&&_.games.length>0){const l=Math.max(..._.games.map(s=>parseInt(s.round)||0));if(l>0)return Array.from({length:l},(s,u)=>u+1)}return[1]}),p=z(()=>_.games?_.games.filter(l=>parseInt(l.round)===h.value):[]),R=l=>{l&&V.push({name:"Player",params:{tournamentId:$.params.tournamentId,playerId:l}})},I=l=>{l.pgn_moves&&V.push({name:"Game",params:{gameId:l.id}})},y=(l,s)=>{const u=C(s.result);return l==="white"&&u==="1-0"||l==="black"&&u==="0-1"};return(l,s)=>{const u=d("v-chip"),L=d("v-chip-group"),P=d("v-card-title"),T=d("v-divider"),F=d("v-progress-circular"),v=d("v-icon"),G=d("v-table"),M=d("v-list-item"),N=d("v-list"),S=d("v-card");return n(),c("div",null,[r(L,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),mandatory:"",color:"primary",class:"mb-4"},{default:o(()=>[(n(!0),c(k,null,g(D.value,t=>(n(),m(u,{key:t,value:t,filter:""},{default:o(()=>[i(" Тур "+a(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(S,null,{default:o(()=>[r(P,{class:"text-h5"},{default:o(()=>[i(" Результаты "+a(h.value)+"-го тура ",1)]),_:1}),r(T),b(_).isLoadingDetails?(n(),c("div",J,[r(F,{indeterminate:"",color:"primary"}),s[1]||(s[1]=e("div",{class:"text-grey mt-2"},"Загрузка пар...",-1))])):p.value.length===0?(n(),c("div",K,[r(v,{size:"x-large"},{default:o(()=>[...s[2]||(s[2]=[i("mdi-magnify-close",-1)])]),_:1}),s[3]||(s[3]=e("div",{class:"mt-4"},"Нет данных о партиях в этом туре",-1))])):(n(),c("div",O,[b(A).mdAndUp.value?(n(),m(G,{key:0,class:"rounds-table",hover:""},{default:o(()=>[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-center",style:{width:"10%"}},"Доска"),e("th",{class:"text-right",style:{width:"35%"}},"Белые"),e("th",{class:"text-center",style:{width:"15%"}},"Результат"),e("th",{class:"text-left",style:{width:"35%"}},"Черные"),e("th",{class:"text-center",style:{width:"5%"}})])],-1)),e("tbody",null,[(n(!0),c(k,null,g(p.value,t=>(n(),c("tr",{key:t.id,onClick:x=>I(t),class:f([{clickable:t.pgn_moves},"table-row"])},[e("td",X,a(t.board),1),e("td",Y,[e("a",{href:"#",onClick:B(x=>R(t.white_player_id),["prevent","stop"]),class:f(["player-link",{"font-weight-bold":y("white",t)}])},a(t.white_name),11,Z),e("div",tt,a(t.white_rating),1)]),e("td",et,[r(u,{label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[i(a(b(C)(t.result)),1)]),_:2},1024)]),e("td",st,[e("a",{href:"#",onClick:B(x=>R(t.black_player_id),["prevent","stop"]),class:f(["player-link",{"font-weight-bold":y("black",t)}])},a(t.black_name),11,ot),e("div",lt,a(t.black_rating),1)]),e("td",nt,[t.pgn_moves?(n(),m(v,{key:0,class:"chevron-icon"},{default:o(()=>[...s[4]||(s[4]=[i("mdi-chevron-right",-1)])]),_:1})):w("",!0)])],10,Q))),128))])]),_:1})):(n(),m(N,{key:1,lines:"two",class:"mobile-list"},{default:o(()=>[(n(!0),c(k,null,g(p.value,(t,x)=>(n(),c(k,{key:t.id},[r(M,{onClick:ft=>I(t),disabled:!t.pgn_moves},{prepend:o(()=>[e("div",at,[r(u,{label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[i(a(b(C)(t.result)),1)]),_:2},1024)])]),append:o(()=>[t.pgn_moves?(n(),m(v,{key:0},{default:o(()=>[...s[8]||(s[8]=[i("mdi-chevron-right",-1)])]),_:1})):w("",!0)]),default:o(()=>[e("div",null,[e("div",rt,[r(v,{size:"x-small",class:"mr-2"},{default:o(()=>[...s[6]||(s[6]=[i("mdi-circle-outline",-1)])]),_:1}),e("div",dt,[e("span",{class:f(["player-name",{"font-weight-bold":y("white",t)}])},a(t.white_name),3),e("span",ct,"("+a(t.white_rating)+")",1)])]),e("div",it,[r(v,{size:"x-small",class:"mr-2"},{default:o(()=>[...s[7]||(s[7]=[i("mdi-circle",-1)])]),_:1}),e("div",_t,[e("span",{class:f(["player-name",{"font-weight-bold":y("black",t)}])},a(t.black_name),3),e("span",ut,"("+a(t.black_rating)+")",1)])])])]),_:2},1032,["onClick","disabled"]),x<p.value.length-1?(n(),m(T,{key:0})):w("",!0)],64))),128))]),_:1}))]))]),_:1})])}}},xt=U(mt,[["__scopeId","data-v-710b56ff"]]);export{xt as default};
