import{u as U,A as E,c as w,a as r,b as i,w as o,r as u,C as H,H as W,f as l,F as k,i as C,d as m,g as d,t as n,l as x,e as t,D as y,L as A,h as g}from"./index-CyrSluM4.js";import{a as R}from"./formatters-C8Ln7w-r.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"text-center pa-10"},J={key:1,class:"text-center text-grey pa-10"},K={key:2},O=["onClick"],Q={class:"text-center text-grey"},X={class:"text-right"},Y=["onClick"],Z={class:"text-caption text-grey"},ee={class:"text-center"},te={class:"text-left"},se=["onClick"],le={key:1,class:"text-caption text-grey"},oe={key:2,class:"text-medium-emphasis"},ae={class:"text-center"},ne={class:"result-box"},re={class:"d-flex align-baseline mb-1"},de={class:"player-info"},ie={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},ce={class:"d-flex align-baseline"},_e={class:"player-info"},ue={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},me={class:"result-box"},ve={class:"d-flex align-baseline"},ye={class:"player-info"},fe={class:"player-name font-weight-bold"},he={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},pe={__name:"RoundsView",setup(be){const c=U(),V=H(),D=W(),L=E(),f=w({get(){return c.activeRound},set(a){c.activeRound=a}}),$=w(()=>{if(c.activeTournament?.rounds_count>0)return Array.from({length:c.activeTournament.rounds_count},(a,s)=>s+1);if(c.games&&c.games.length>0){const a=Math.max(...c.games.map(s=>parseInt(s.round)||0));if(a>0)return Array.from({length:a},(s,_)=>_+1)}return[1]}),h=w(()=>c.games?c.games.filter(a=>parseInt(a.round)===f.value):[]),B=a=>{a&&V.push({name:"Player",params:{tournamentId:D.params.tournamentId,playerId:a}})},I=a=>{a.pgn_moves&&V.push({name:"Game",params:{gameId:a.id}})},p=(a,s)=>{const _=R(s.result);return a==="white"&&_==="1-0"||a==="black"&&_==="0-1"};return(a,s)=>{const _=u("v-chip"),P=u("v-chip-group"),F=u("v-card-title"),T=u("v-divider"),G=u("v-progress-circular"),v=u("v-icon"),M=u("v-table"),z=u("v-list-item"),N=u("v-list"),S=u("v-card");return l(),r("div",null,[i(P,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),mandatory:"",color:"primary",class:"mb-4"},{default:o(()=>[(l(!0),r(k,null,C($.value,e=>(l(),m(_,{key:e,value:e,filter:""},{default:o(()=>[d(" Тур "+n(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),i(S,null,{default:o(()=>[i(F,{class:"text-h5"},{default:o(()=>[d(" Результаты "+n(f.value)+"-го тура ",1)]),_:1}),i(T),x(c).isLoadingDetails?(l(),r("div",q,[i(G,{indeterminate:"",color:"primary"}),s[1]||(s[1]=t("div",{class:"text-grey mt-2"},"Загрузка пар...",-1))])):h.value.length===0?(l(),r("div",J,[i(v,{size:"x-large"},{default:o(()=>[...s[2]||(s[2]=[d("mdi-magnify-close",-1)])]),_:1}),s[3]||(s[3]=t("div",{class:"mt-4"},"Нет данных о партиях в этом туре",-1))])):(l(),r("div",K,[x(L).mdAndUp.value?(l(),m(M,{key:0,class:"rounds-table",hover:""},{default:o(()=>[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",{class:"text-center",style:{width:"10%"}},"Доска"),t("th",{class:"text-right",style:{width:"35%"}},"Белые"),t("th",{class:"text-center",style:{width:"15%"}},"Результат"),t("th",{class:"text-left",style:{width:"35%"}},"Черные"),t("th",{class:"text-center",style:{width:"5%"}})])],-1)),t("tbody",null,[(l(!0),r(k,null,C(h.value,e=>(l(),r("tr",{key:e.id,onClick:b=>I(e),class:y([{clickable:e.pgn_moves},"table-row"])},[t("td",Q,n(e.board||"-"),1),t("td",X,[t("a",{href:"#",onClick:A(b=>B(e.white_player_id),["prevent","stop"]),class:y(["player-link",{"font-weight-bold":p("white",e)}])},n(e.white_name),11,Y),t("div",Z,n(e.white_rating),1)]),t("td",ee,[e.black_player_id?(l(),m(_,{key:0,label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[d(n(x(R)(e.result)),1)]),_:2},1024)):(l(),m(_,{key:1,label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[...s[4]||(s[4]=[d("Bye",-1)])]),_:1}))]),t("td",te,[e.black_player_id?(l(),r("a",{key:0,href:"#",onClick:A(b=>B(e.black_player_id),["prevent","stop"]),class:y(["player-link",{"font-weight-bold":p("black",e)}])},n(e.black_name),11,se)):g("",!0),e.black_player_id?(l(),r("div",le,n(e.black_rating),1)):(l(),r("span",oe,"Пропуск тура"))]),t("td",ae,[e.pgn_moves?(l(),m(v,{key:0,class:"chevron-icon"},{default:o(()=>[...s[5]||(s[5]=[d("mdi-chevron-right",-1)])]),_:1})):g("",!0)])],10,O))),128))])]),_:1})):(l(),m(N,{key:1,lines:"two",class:"mobile-list"},{default:o(()=>[(l(!0),r(k,null,C(h.value,(e,b)=>(l(),r(k,{key:e.id},[e.black_player_id?(l(),m(z,{key:0,onClick:ke=>I(e),disabled:!e.pgn_moves},{prepend:o(()=>[t("div",ne,[i(_,{label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[d(n(x(R)(e.result)),1)]),_:2},1024)])]),append:o(()=>[e.pgn_moves?(l(),m(v,{key:0},{default:o(()=>[...s[9]||(s[9]=[d("mdi-chevron-right",-1)])]),_:1})):g("",!0)]),default:o(()=>[t("div",null,[t("div",re,[i(v,{size:"x-small",class:"mr-2"},{default:o(()=>[...s[7]||(s[7]=[d("mdi-circle-outline",-1)])]),_:1}),t("div",de,[t("span",{class:y(["player-name",{"font-weight-bold":p("white",e)}])},n(e.white_name),3),t("span",ie,"("+n(e.white_rating)+")",1)])]),t("div",ce,[i(v,{size:"x-small",class:"mr-2"},{default:o(()=>[...s[8]||(s[8]=[d("mdi-circle",-1)])]),_:1}),t("div",_e,[t("span",{class:y(["player-name",{"font-weight-bold":p("black",e)}])},n(e.black_name),3),t("span",ue,"("+n(e.black_rating)+")",1)])])])]),_:2},1032,["onClick","disabled"])):(l(),m(z,{key:1},{prepend:o(()=>[t("div",me,[i(_,{label:"",variant:"tonal",class:"font-weight-bold"},{default:o(()=>[...s[10]||(s[10]=[d("Bye",-1)])]),_:1})])]),default:o(()=>[t("div",null,[t("div",ve,[i(v,{size:"x-small",class:"mr-2"},{default:o(()=>[...s[11]||(s[11]=[d("mdi-circle-outline",-1)])]),_:1}),t("div",ye,[t("span",fe,n(e.white_name),1),t("span",he,"("+n(e.white_rating)+")",1)])])])]),_:2},1024)),b<h.value.length-1?(l(),m(T,{key:2})):g("",!0)],64))),128))]),_:1}))]))]),_:1})])}}},Ce=j(pe,[["__scopeId","data-v-15bdc03e"]]);export{Ce as default};
