import{u as U,A as j,j as E,c as z,a as c,b as r,w as l,r as d,C as H,H as J,f as n,F as b,i as g,d as m,g as i,t as a,l as k,e,D as f,J as A,h as w}from"./index-spYIlC0H.js";import{a as C}from"./formatters-CuXF23sB.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"text-center pa-10"},K={key:1,class:"text-center text-grey pa-10"},O={key:2},Q=["onClick"],X={class:"text-center text-grey"},Y={class:"text-right"},Z=["onClick"],tt={class:"text-caption text-grey"},et={class:"text-center"},st={class:"text-left"},lt=["onClick"],ot={class:"text-caption text-grey"},nt={class:"text-center"},at={class:"result-box"},rt={class:"d-flex align-baseline mb-1"},dt={class:"player-info"},ct={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},it={class:"d-flex align-baseline"},_t={class:"player-info"},ut={class:"player-rating text-body-2 text-grey-darken-1 ml-2"},mt={__name:"RoundsView",setup(vt){const _=U(),V=H(),B=J(),D=j(),h=E(1),$=z(()=>{if(_.activeTournament?.rounds_count>0)return Array.from({length:_.activeTournament.rounds_count},(o,s)=>s+1);if(_.games&&_.games.length>0){const o=Math.max(..._.games.map(s=>parseInt(s.round)||0));if(o>0)return Array.from({length:o},(s,u)=>u+1)}return[1]}),p=z(()=>_.games?_.games.filter(o=>parseInt(o.round)===h.value):[]),R=o=>{o&&V.push({name:"Player",params:{tournamentId:B.params.tournamentId,playerId:o}})},I=o=>{o.pgn_moves&&V.push({name:"Game",params:{gameId:o.id}})},y=(o,s)=>{const u=C(s.result);return o==="white"&&u==="1-0"||o==="black"&&u==="0-1"};return(o,s)=>{const u=d("v-chip"),L=d("v-chip-group"),P=d("v-card-title"),T=d("v-divider"),F=d("v-progress-circular"),v=d("v-icon"),G=d("v-table"),M=d("v-list-item"),N=d("v-list"),S=d("v-card");return n(),c("div",null,[r(L,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),mandatory:"",color:"primary",class:"mb-4"},{default:l(()=>[(n(!0),c(b,null,g($.value,t=>(n(),m(u,{key:t,value:t,filter:""},{default:l(()=>[i(" Тур "+a(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(S,null,{default:l(()=>[r(P,{class:"text-h5"},{default:l(()=>[i(" Результаты "+a(h.value)+"-го тура ",1)]),_:1}),r(T),k(_).isLoadingDetails?(n(),c("div",q,[r(F,{indeterminate:"",color:"primary"}),s[1]||(s[1]=e("div",{class:"text-grey mt-2"},"Загрузка пар...",-1))])):p.value.length===0?(n(),c("div",K,[r(v,{size:"x-large"},{default:l(()=>[...s[2]||(s[2]=[i("mdi-magnify-close",-1)])]),_:1}),s[3]||(s[3]=e("div",{class:"mt-4"},"Нет данных о партиях в этом туре",-1))])):(n(),c("div",O,[k(D).mdAndUp.value?(n(),m(G,{key:0,class:"rounds-table",hover:""},{default:l(()=>[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-center",style:{width:"10%"}},"Доска"),e("th",{class:"text-right",style:{width:"35%"}},"Белые"),e("th",{class:"text-center",style:{width:"15%"}},"Результат"),e("th",{class:"text-left",style:{width:"35%"}},"Черные"),e("th",{class:"text-center",style:{width:"5%"}})])],-1)),e("tbody",null,[(n(!0),c(b,null,g(p.value,t=>(n(),c("tr",{key:t.id,onClick:x=>I(t),class:f([{clickable:t.pgn_moves},"table-row"])},[e("td",X,a(t.board),1),e("td",Y,[e("a",{href:"#",onClick:A(x=>R(t.white_player_id),["prevent","stop"]),class:f(["player-link",{"font-weight-bold":y("white",t)}])},a(t.white_name),11,Z),e("div",tt,a(t.white_rating),1)]),e("td",et,[r(u,{label:"",variant:"tonal",class:"font-weight-bold"},{default:l(()=>[i(a(k(C)(t.result)),1)]),_:2},1024)]),e("td",st,[e("a",{href:"#",onClick:A(x=>R(t.black_player_id),["prevent","stop"]),class:f(["player-link",{"font-weight-bold":y("black",t)}])},a(t.black_name),11,lt),e("div",ot,a(t.black_rating),1)]),e("td",nt,[t.pgn_moves?(n(),m(v,{key:0,class:"chevron-icon"},{default:l(()=>[...s[4]||(s[4]=[i("mdi-chevron-right",-1)])]),_:1})):w("",!0)])],10,Q))),128))])]),_:1})):(n(),m(N,{key:1,lines:"two",class:"mobile-list"},{default:l(()=>[(n(!0),c(b,null,g(p.value,(t,x)=>(n(),c(b,{key:t.id},[r(M,{onClick:ft=>I(t),disabled:!t.pgn_moves},{prepend:l(()=>[e("div",at,[r(u,{label:"",variant:"tonal",class:"font-weight-bold"},{default:l(()=>[i(a(k(C)(t.result)),1)]),_:2},1024)])]),append:l(()=>[t.pgn_moves?(n(),m(v,{key:0},{default:l(()=>[...s[8]||(s[8]=[i("mdi-chevron-right",-1)])]),_:1})):w("",!0)]),default:l(()=>[e("div",null,[e("div",rt,[r(v,{size:"x-small",class:"mr-2"},{default:l(()=>[...s[6]||(s[6]=[i("mdi-circle-outline",-1)])]),_:1}),e("div",dt,[e("span",{class:f(["player-name",{"font-weight-bold":y("white",t)}])},a(t.white_name),3),e("span",ct,"("+a(t.white_rating)+")",1)])]),e("div",it,[r(v,{size:"x-small",class:"mr-2"},{default:l(()=>[...s[7]||(s[7]=[i("mdi-circle",-1)])]),_:1}),e("div",_t,[e("span",{class:f(["player-name",{"font-weight-bold":y("black",t)}])},a(t.black_name),3),e("span",ut,"("+a(t.black_rating)+")",1)])])])]),_:2},1032,["onClick","disabled"]),x<p.value.length-1?(n(),m(T,{key:0})):w("",!0)],64))),128))]),_:1}))]))]),_:1})])}}},xt=W(mt,[["__scopeId","data-v-710b56ff"]]);export{xt as default};
